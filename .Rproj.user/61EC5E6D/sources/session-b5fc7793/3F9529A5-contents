---
title: "Creating Professional Looking PDF Tables Using Quarto and Typst"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Introduction to typstable}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
library(typstable)
```

## Introduction

The purpose of typstable /ˈtaɪps.tə.bᵊl/ is to produce publication ready tables for Quarto documents targeting the Typst format. Typst is a modern, open-source, markup-based typesetting system that provides an alternative to LaTeX for rendering quarto files as PDF documents. At the time of writing I could not find any R package that enables prepare Typst tables with non-trivial formatting needs. That is the gap this package aims to fill.

## Installation

```{r eval = FALSE}
# Install from GitHub
pak::pak("freierson/typstable")

# Install from CRAN if available
install.packages("typstable")
```

## Getting Started

Create a basic Typst table with `tt()`.

```{r eval = FALSE}
library(typstable)

tt(mtcars[1:5, 1:3])
```

This generates Typst markup that renders as:

```{r echo = FALSE, out.width = "100%"}
knitr::include_graphics("examples/basic-table.svg")
```

## Table Styling

Use `tt_style()` to customize the table appearance:

```{r eval = FALSE}
mtcars[1:5, 1:3] |>
  tt(col_names = c("Miles per Gallon", "Cylinders", "Displacement")) |>
  tt_style(
    stroke = TRUE,
    striped = TRUE,
    header_separate = TRUE,
    inset = "8pt"
  )
```

## Saving Tables

Use `tt_save()` to export tables to various formats:
- **SVG** - Scalable vector graphics (best for web)
- **PNG** - Raster image (good for documents)
- **PDF** - Portable document format
- **Typst source** - Raw `.typ` file

```{r eval = FALSE}
# Save as SVG
tt(mtcars[1:5, 1:3]) |>
  tt_save("my-table.svg")

# Save as PNG with higher resolution
tt(mtcars[1:5, 1:3]) |>
  tt_style(stroke = TRUE) |>
  tt_save("my-table.png", ppi = 300)
```

Note: SVG, PNG, and PDF export requires the Typst CLI to be installed. Install it from <https://typst.app/>.

## Column, Row, and Cell Formatting

Format specific parts of the table with `tt_column()`, `tt_row()`, and `tt_cell()`:

```{r eval = FALSE}
tt(mtcars[1:5, 1:3]) |>
  tt_column(mpg, align = "right") |>
  tt_row(1, bold = TRUE) |>
  tt_cell(2, 2, background = "yellow")
```

## Advanced Features

### Column Widths

Control column widths with `tt_widths()`:

```{r eval = FALSE}
tt(mtcars[1:5, 1:3]) |>
  tt_widths(1, 2, 1)  # Proportional widths (25%, 50%, 25%)
```

### Headers Above

Add spanning headers with `tt_header_above()`:

```{r eval = FALSE}
tt(mtcars[1:5, 1:4]) |>
  tt_header_above(c("Performance" = 2, "Engine" = 2))
```

### Row Grouping

Group rows with `tt_pack_rows()`:

```{r eval = FALSE}
tt(mtcars[1:6, 1:3]) |>
  tt_pack_rows("4 Cylinders", 1, 2) |>
  tt_pack_rows("6 Cylinders", 3, 6)
```
